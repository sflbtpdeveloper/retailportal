sap.ui.define(["zretail_sfl/controller/BaseController","sap/ui/model/odata/v2/ODataModel","sap/m/MessageToast","sap/m/MessageBox"],function(e,t,s,n){"use strict";return e.extend("zretail_sfl.fragments.front",{onInit:function(e){if(!this._initialized){this.startFadeInOut();this.startFadeInOut2();this._initialized=true}},_startCarouselTimer:function(e){var t=this._sFragmentUniqueId;var s=this.getView().byId(t+"--__productCarousel");this._carouselIndex=0;var n=s.getPages();var a=n.length;if(a>1){setInterval(function(){this._carouselIndex=(this._carouselIndex+1)%a;const e=n[this._carouselIndex];if(e){s.setActivePage(e)}}.bind(this),5e3)}},onLogOut:async function(){debugger;const e=await this.getCsrfToken("/nodeapp/custom/logout");$.ajax({type:"POST",url:"/nodeapp/custom/logout",headers:{"X-CSRF-Token":e,"Content-Type":"application/json"},success:function(e){window.location.href=e},error:function(e,t,s){console.error("Logout failed:",s);console.log("Response status:",e.status);console.log("Response text:",e.responseText)}})},getCsrfToken:function(e){return new Promise(function(t,s){$.ajax({type:"GET",url:e,headers:{"X-CSRF-Token":"fetch","Content-Type":"application/json"},success:function(e,s,n){const a=n.getResponseHeader("X-CSRF-Token");debugger;t(a)},error:function(e,t,n){console.error("Failed to fetch CSRF token:",n);s(n)}})})},startSessionTimeout:function(){const e=48e4;let t;const s=()=>{clearTimeout(t);t=setTimeout(()=>{this.onSessionTimeout()},e)};document.addEventListener("mousemove",s);document.addEventListener("keydown",s);s()},onSessionTimeout:function(){sap.m.MessageToast.show("Session has expired due to inactivity.");this.onLogOut()},startFadeInOut:function(e){if(this._fadeInterval){clearInterval(this._fadeInterval)}var t=["/images/Black-Nut.jpg","/images/Bolt.jpg","/images/DSC03285.jpg","/images/IMG_0398.jpg","/images/IMG_3883.jpg"];var s=this._sFragmentUniqueId;var n=this.getView().byId(s+"--fadeImage");this._carouselIndex=0;var a=t.length;n.setSrc(t[this._carouselIndex]);if(a>1){this._fadeInterval=setInterval(function(){this._carouselIndex=(this._carouselIndex+1)%a;const e=t[this._carouselIndex];if(e){n.setSrc(e)}}.bind(this),3e3)}},startFadeInOut2:function(e){if(this._fadeInterval2){clearInterval(this._fadeInterval2)}var t=["/images/csr1.jpg","/images/csr6.jpg","/images/csr7.jpg","/images/csr8.jpg","/images/csr9.jpg","/images/csr10.jpg"];var s=this._sFragmentUniqueId;var n=this.getView().byId(s+"--fadeImage2");this._carouselIndex2=0;var a=t.length;n.setSrc(t[this._carouselIndex2]);if(a>1){this._fadeInterval2=setInterval(function(){this._carouselIndex2=(this._carouselIndex2+1)%a;const e=t[this._carouselIndex2];if(e){n.setSrc(e)}}.bind(this),3e3)}}})});
//# sourceMappingURL=front.js.map